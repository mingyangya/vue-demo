{"version":3,"sources":["webpack:///./src/components/notice/Index.vue?a056","webpack:///./src/components/notice/Index.vue","webpack:///src/components/notice/Index.vue","webpack:///./src/components/notice/Index.vue?78ea","webpack:///./src/components/notice/Index.vue?60ec"],"names":["render","_vm","this","_c","_self","attrs","noticeShow","content","length","staticClass","class","isMobile","ref","style","noticeStyle","_l","item","i","key","itemStyle","_v","_s","on","close","_e","staticRenderFns","name","props","type","Array","default","Boolean","distance","Number","direction","String","validator","value","includes","data","hasScrollAnimation","timer","contentTranslate","oneScreen","computed","noticeSize","ele","$refs","noticeEle","width","clientWidth","height","clientHeight","noticeContentSize","noticeContentEle","flexDirection","transform","concat","len","mounted","window","addEventListener","initAnimation","beforeDestroy","removeEventListener","watch","immediate","handler","getNotice","methods","_this","$nextTick","tickStop","contentWidth","tickStart","contentHeight","tick","cancelAnimationFrame","requestAnimationFrame","component"],"mappings":"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","file":"js/chunk-6c1c0a84.ba21db2c.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--9-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=style&index=0&id=faebee06&prod&lang=scss&scoped=true&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('transition',{attrs:{\"name\":\"slide-up\"}},[(_vm.noticeShow && _vm.content && _vm.content.length > 0)?_c('div',{staticClass:\"com-notice\",class:_vm.isMobile ? 'app-layout-type-mobile' : 'app-layout-type-pc'},[_c('div',{ref:\"noticeEle\",staticClass:\"content-container\",style:(_vm.noticeStyle)},[_c('div',{ref:\"noticeContentEle\",staticClass:\"content\",style:(_vm.style)},_vm._l((_vm.content),function(item,i){return _c('div',{key:i,staticClass:\"content-item\",style:(_vm.itemStyle)},[_vm._v(\" \"+_vm._s(item)+\" \")])}),0)]),_c('span',{staticClass:\"close-btn\",on:{\"click\":_vm.close}})]):_vm._e()])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <transition name=\"slide-up\">\n    <div class=\"com-notice\" :class=\"isMobile ? 'app-layout-type-mobile' : 'app-layout-type-pc'\" v-if=\"noticeShow && content && content.length > 0\">\n      <div ref=\"noticeEle\" class=\"content-container\" :style=\"noticeStyle\">\n        <div ref=\"noticeContentEle\" class=\"content\" :style=\"style\">\n          <div class=\"content-item\" v-for=\"(item, i) in content\" :key=\"i\" :style=\"itemStyle\">\n            {{item}}\n          </div>\n        </div>\n      </div>\n      <span class=\"close-btn\" @click=\"close\"></span>\n    </div>\n  </transition>\n</template>\n\n<script>\nexport default {\n  name: 'com-notice',\n  props: {\n    content: {\n      type: Array,\n      default: []\n    },\n    isMobile: {\n      type: Boolean,\n      default: false\n    },\n    distance: {\n      type: Number,\n      default: 1\n    },\n    direction: {\n      type: String,\n      default: 'x',\n      validator: value => ['x', 'y'].includes(value)\n    }\n  },\n  data () {\n    return {\n      noticeShow: true,           // 通知栏显示（需要同时有内容）\n      hasScrollAnimation: false,  // 通知栏文字是否滚动\n      timer: null,                // 通知栏文字动画延时器\n      contentTranslate: 0,\n      oneScreen: true             // 一个占一屏\n    }\n  },\n  computed: {\n    noticeSize () {\n      const ele = this.$refs.noticeEle\n      return {\n        width: ele.clientWidth,\n        height: ele.clientHeight\n      }\n    },\n    noticeContentSize () {\n      const ele = this.$refs.noticeContentEle\n      return {\n        width: ele.clientWidth,\n        height: ele.clientHeight\n      }\n    },\n    noticeStyle () {\n      if (!this.hasScrollAnimation) return\n      let style = {}\n      if (this.direction === 'x') {\n        // style = this.oneScreen ? { \"min-width\": '100%' } : {}\n        // style.justifyContent =  'flex-start'\n        // style.flexDirection =  'row'\n      } else {\n        // style = this.oneScreen ? { \"min-height\": '100%' } : {}\n        // style.justifyContent =  'flex-start'\n        // style.flexDirection =  'column'\n      }\n      return style\n    },\n    style () {\n      return {\n        flexDirection: this.direction === 'x' ? 'row' : 'column',\n        transform: this.direction === 'x' ? `translateX(${this.contentTranslate}px)` : `translateY(${this.contentTranslate}px)`\n      }\n    },\n    itemStyle () {\n      return this.direction === 'x' ? (this.oneScreen ? { \"min-width\": '100%' } : { \"width\": 'max-content'}) : (this.oneScreen ? { \"min-height\": '100%' } : { \"height\": 'max-content'})\n    },\n    len () {\n      return this.oneScreen ? this.content.length - 1 : 1\n    }\n  },\n  mounted () {\n    window.addEventListener('resize', this.initAnimation)\n  },\n  beforeDestroy () {\n    window.removeEventListener('resize', this.initAnimation)\n  },\n  watch: {\n    content: {\n      immediate: true,\n      handler () {\n        this.getNotice()\n      }\n    }\n  },\n  methods: {\n    // 获取通知栏信息\n    getNotice () {\n      this.$nextTick(() => {\n        this.initAnimation()\n      })\n    },\n\n    initAnimation () {\n      if (this.noticeShow && this.content && this.content.length) {\n        this.tickStop()\n\n        if (this.direction === 'x') {\n          const { width } =  this.noticeSize\n          const { width: contentWidth } =  this.noticeContentSize\n\n          // 通知栏内容长度超过父容器时，滚动展示内容\n          if (contentWidth * this.len > width) {\n            this.tickStart()\n          }\n        } else {\n          const { height } =  this.noticeSize\n          const { height: contentHeight } =  this.noticeContentSize\n          // 通知栏内容高度超过父容器时，滚动展示内容\n          if (contentHeight * this.len > height) {\n            this.tickStart()\n          }\n        }\n      }\n    },\n\n    tickStart () {\n      this.hasScrollAnimation = true\n      // 初始位置设定在右侧或者顶部\n      this.contentTranslate = this.direction === 'x' ? this.noticeContentSize.width : this.noticeContentSize.height\n      this.timer = true\n      this.tick()\n    },\n\n    tickStop () {\n      if (this.hasScrollAnimation) {\n        this.hasScrollAnimation = false\n        this.contentTranslate = 0\n        cancelAnimationFrame && cancelAnimationFrame(this.timer)\n        this.timer = null\n      }\n    },\n\n    tick () {\n      this.contentTranslate -= this.distance\n\n      if (this.direction === 'x') {\n        // 滚动到左侧消失在屏幕外后，重置到右侧初始位置\n        if (this.contentTranslate < -this.noticeContentSize.width * this.len) {\n          this.contentTranslate = this.noticeContentSize.width\n        }\n      } else {\n        // 滚动顶部侧消失在屏幕外后，重置到顶部侧初始位置\n        if (this.contentTranslate < -this.noticeContentSize.height * this.len) {\n          this.contentTranslate = this.noticeContentSize.height\n        }\n      }\n\n      if (this.timer) {\n        this.timer = requestAnimationFrame(this.tick)\n      }\n    },\n\n    close () {\n      this.noticeShow = false\n      this.tickStop()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n$orange: #FA8919;\n$gray: #888;\n\n.com-notice {\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%; height: 45px;\n  background: #FFF8F1;\n  font-size: 16px;\n  font-weight: 400;\n  color: $orange;\n  overflow: hidden;\n}\n\n.content-container {\n  display: flex;\n  justify-content: center;\n  width: 960px;\n  height: 100%;\n  overflow: hidden;\n}\n\n.content {\n  position: relative;\n  display: flex;\n  min-width: 101%;\n  height: 100%;\n  width: max-content;\n  white-space: nowrap;\n  align-items: center;\n}\n\n.content-item {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-shrink: 0;\n  min-width: 100%;\n}\n\n.notice-dialog {\n\n  & .iconfont {\n    line-height: 30px;\n    font-size: 14px;\n    color: #999;\n  }\n\n  @include deep('.gkui-dialog-container') {\n    box-sizing: border-box;\n    padding: 40px 0 30px;\n    border-radius: 5px;\n  }\n\n   @include deep('.gkui-dialog-footer') {\n    padding: 0;\n  }\n\n  & .dialog-content {\n    text-align: center;\n    color: $gray;\n\n    & .orange {\n      color: $orange;\n    }\n\n    & .small {\n      font-size: 14px;\n    }\n  }\n}\n\n.close-btn {\n  position: absolute; z-index: 10; left: 50%; top: 12px;\n  margin-left: 550px;\n  width: 20px; height: 20px;\n  cursor: pointer;\n  transform: rotate(45deg);\n\n  &:before,\n  &:after {\n    content: '';\n    position: absolute; left: 50%; top: 50%;\n    width: 15px;\n    border-top: 1px solid $orange;\n    transform: translate(-50%, -50%);\n  }\n\n  &:after {\n    transform: translate(-50%, -50%) rotate(90deg);\n  }\n}\n\n.app-layout-type-mobile {\n  &.com-notice {\n    box-sizing: border-box;\n    height: 30px;\n    padding: 0 29px 0 15px;\n    background: #f3ded1;\n    font-size: 14px;\n    font-weight: 400;\n    line-height: 16px;\n    color: #684735;\n  }\n\n  .notice-dialog {\n    @include deep('.gkui-dialog-container') {\n      padding: 51px 0 45px;\n      border-radius: 8px;\n    }\n\n    @include deep('.gkui-dialog-close-wrap') {\n      top: 5px; right: 5px;\n    }\n\n    & .iconfont {\n      font-size: 11px; font-weight: 300;\n    }\n\n  }\n\n  .content-container {\n    width: 100%;\n  }\n\n  .close-btn {\n    left: auto; right: 6px; top: 8px;\n    width: 15px; height: 15px;\n    background: #d0d0d0;\n    border-radius: 50%;\n\n    &:before,\n    &:after {\n      width: 9px;\n      border-color: #fff;\n    }\n  }\n}\n\n.slide-up-active, .slide-up-leave-active {\n  transition: all 0.5s ease;\n}\n.slide-up-enter {\n  height: 50px;\n  opacity: 1;\n}\n\n.slide-up-leave-to {\n  height: 0;\n  opacity: 0;\n}\n\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Index.vue?vue&type=template&id=faebee06&scoped=true&\"\nimport script from \"./Index.vue?vue&type=script&lang=js&\"\nexport * from \"./Index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Index.vue?vue&type=style&index=0&id=faebee06&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"faebee06\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}