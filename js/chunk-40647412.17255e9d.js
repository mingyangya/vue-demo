(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40647412","chunk-3ace71e6"],{"857a":function(t,e,n){"use strict";var i=n("e330"),r=n("1d80"),o=n("577e"),a=/"/g,s=i("".replace);t.exports=function(t,e,n,i){var u=o(r(t)),c="<"+e;return""!==n&&(c+=" "+n+'="'+s(o(i),a,"&quot;")+'"'),c+">"+u+"</"+e+">"}},"8cd1":function(t,e,n){"use strict";n("a23e")},9411:function(t,e,n){"use strict";n("c3db")},9911:function(t,e,n){"use strict";var i=n("23e7"),r=n("857a"),o=n("af03");i({target:"String",proto:!0,forced:o("link")},{link:function(t){return r(this,"a","href",t)}})},a23e:function(t,e,n){},af03:function(t,e,n){"use strict";var i=n("d039");t.exports=function(t){return i((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},bee2:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var i=n("a38e");function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Object(i["a"])(r.key),r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}},c3db:function(t,e,n){},ce2a:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t._self._c;return e("gkDrag",{attrs:{touch:t.touch,range:t.thumbRange,auto:t.auto},on:{"click-event":t.clickEvent,move:t.handleThumbMove}},[e("div",{staticClass:"home-back",style:t.thumbStyle,on:{click:t.clickHome}},[e("div",{ref:"homeEle",class:["home-icon",{scrolling:t.scrolling}],attrs:{drag:""}}),e("BackWxtime",{ref:"dialog",on:{close:t.close,open:t.open}})],1)])},r=[],o=n("5530");n("a9e3"),n("b64b");
/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function a(t){return null!=t&&"object"===typeof t&&!1===Array.isArray(t)}
/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */
function s(t){return!0===a(t)&&"[object Object]"===Object.prototype.toString.call(t)}function u(t){var e,n;return!1!==s(t)&&(e=t.constructor,"function"===typeof e&&(n=e.prototype,!1!==s(n)&&!1!==n.hasOwnProperty("isPrototypeOf")))}var c=Object.prototype,l=c.toString,h=c.hasOwnProperty,d=/^\s*function (\w+)/;function f(t){var e=null!==t&&void 0!==t?t.type?t.type:t:null,n=e&&e.toString().match(d);return n&&n[1]}function p(t){if(null===t||void 0===t)return null;var e=t.constructor.toString().match(d);return e&&e[1]}function m(){}var v=function(){return!0},g=function(t,e){return h.call(t,e)},y=Number.isInteger||function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t},b=Array.isArray||function(t){return"[object Array]"===l.call(t)},T=function(t){return"[object Function]"===l.call(t)};function k(t){return Object.defineProperty(t,"def",{value:function(t){return void 0!==t||this.default?T(t)||S(this,t)?(b(t)?this.default=function(){return[].concat(t)}:u(t)?this.default=function(){return Object.assign({},t)}:this.default=t,this):(M(this._vueTypes_name+' - invalid default value: "'+t+'"',t),this):this},enumerable:!1,writable:!1})}function O(t){return Object.defineProperty(t,"isRequired",{get:function(){return this.required=!0,this},enumerable:!1})}function w(t){return Object.defineProperty(t,"validate",{value:function(t){return this.validator=t.bind(this),this},enumerable:!1})}function j(t,e,n){return void 0===n&&(n=!1),Object.defineProperty(e,"_vueTypes_name",{enumerable:!1,writable:!1,value:t}),k(O(e)),n?w(e):Object.defineProperty(e,"validate",{value:function(){return M(t+' - "validate" method not supported on this type'),this},enumerable:!1}),T(e.validator)&&(e.validator=e.validator.bind(e)),e}function S(t,e,n){void 0===n&&(n=!1);var i,r=t,o=!0;u(t)||(r={type:t});var a,s=r._vueTypes_name?r._vueTypes_name+" - ":"";if(h.call(r,"type")&&null!==r.type){if(void 0===r.type)throw new TypeError("[VueTypes error]: Setting type to undefined is not allowed.");if(!r.required&&void 0===e)return o;b(r.type)?(o=r.type.some((function(t){return S(t,e,!0)})),i=r.type.map((function(t){return f(t)})).join(" or ")):(i=f(r),o="Array"===i?b(e):"Object"===i?u(e):"String"===i||"Number"===i||"Boolean"===i||"Function"===i?p(e)===i:e instanceof r.type)}return o?h.call(r,"validator")&&T(r.validator)?(n&&(a=M,M=m),o=r.validator(e),a&&(M=a),o||!1!==n||M(s+"custom validation failed"),o):o:(!1===n&&M(s+'value "'+e+'" should be of type "'+i+'"'),!1)}var M=m,x=function(){return{func:function(){},bool:!0,string:"",number:0,array:function(){return[]},object:function(){return{}},integer:0}},E=function(t){var e=x();return Object.defineProperty(t,"sensibleDefaults",{enumerable:!1,set:function(t){e=!1===t?{}:!0===t?x():t},get:function(){return e}})};function _(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}var D={get any(){return j("any",{type:null},!0)},get func(){return j("function",{type:Function},!0).def(D.sensibleDefaults.func)},get bool(){return j("boolean",{type:Boolean},!0).def(D.sensibleDefaults.bool)},get string(){return j("string",{type:String},!0).def(D.sensibleDefaults.string)},get number(){return j("number",{type:Number},!0).def(D.sensibleDefaults.number)},get array(){return j("array",{type:Array},!0).def(D.sensibleDefaults.array)},get object(){return j("object",{type:Object},!0).def(D.sensibleDefaults.object)},get integer(){return j("integer",{type:Number,validator:function(t){return y(t)}}).def(D.sensibleDefaults.integer)},get symbol(){return j("symbol",{type:null,validator:function(t){return"symbol"===typeof t}},!0)},extend:function(t){if(void 0===t&&(t={}),b(t))return t.forEach((function(t){return D.extend(t)})),this;var e=t,n=e.name,i=e.validate,r=void 0!==i&&i,o=e.getter,a=void 0!==o&&o,s=_(e,["name","validate","getter"]);if(g(D,n))throw new TypeError('[VueTypes error]: Type "'+n+'" already defined');var u,c=s.type,l=s.validator,h=void 0===l?v:l;if(c&&c._vueTypes_name){delete s.type;for(var d=["type","required","default"],f=0;f<d.length;f+=1){var p=d[f];void 0!==c[p]&&(s[p]=c[p])}r=!1,T(c.validator)&&(s.validator=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return c.validator.apply(c,e)&&h.apply(this,e)})}if(a)u={get:function(){return j(n,Object.assign({},s),r)},enumerable:!0,configurable:!1};else{var m=s.validator;u={value:function(){var t=j(n,Object.assign({},s),r);if(m){for(var e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];t.validator=m.bind.apply(m,[t].concat(i))}return t},writable:!1,enumerable:!0,configurable:!1}}return Object.defineProperty(this,n,u)},custom:function(t,e){if(void 0===e&&(e="custom validation failed"),"function"!==typeof t)throw new TypeError("[VueTypes error]: You must provide a function as argument");return j(t.name||"<<anonymous function>>",{validator:function(n){var i=t(n);return i||M(this._vueTypes_name+" - "+e),i}})},oneOf:function(t){if(!b(t))throw new TypeError("[VueTypes error]: You must provide an array as argument");var e='oneOf - value should be one of "'+t.join('", "')+'"',n=t.reduce((function(t,e){return null!==e&&void 0!==e&&-1===t.indexOf(e.constructor)&&t.push(e.constructor),t}),[]);return j("oneOf",{type:n.length>0?n:null,validator:function(n){var i=-1!==t.indexOf(n);return i||M(e),i}})},instanceOf:function(t){return j("instanceOf",{type:t})},oneOfType:function(t){if(!b(t))throw new TypeError("[VueTypes error]: You must provide an array as argument");var e=!1,n=t.reduce((function(t,n){if(u(n)){if("oneOf"===n._vueTypes_name)return t.concat(n.type||[]);if(T(n.validator))return e=!0,t;if(n.type){if(b(n.type))return t.concat(n.type);t.push(n.type)}return t}return t.push(n),t}),[]);if(!e)return j("oneOfType",{type:n});var i=t.map((function(t){return t&&b(t.type)?t.type.map(f):f(t)})).reduce((function(t,e){return t.concat(b(e)?e:[e])}),[]).join('", "');return this.custom((function(e){var n=t.some((function(t){return"oneOf"===t._vueTypes_name?!t.type||S(t.type,e,!0):S(t,e,!0)}));return n||M('oneOfType - value type should be one of "'+i+'"'),n}))},arrayOf:function(t){return j("arrayOf",{type:Array,validator:function(e){var n=e.every((function(e){return S(t,e)}));return n||M('arrayOf - value must be an array of "'+f(t)+'"'),n}})},objectOf:function(t){return j("objectOf",{type:Object,validator:function(e){var n=Object.keys(e).every((function(n){return S(t,e[n])}));return n||M('objectOf - value must be an object of "'+f(t)+'"'),n}})},shape:function(t){var e=Object.keys(t),n=e.filter((function(e){return t[e]&&!0===t[e].required})),i=j("shape",{type:Object,validator:function(i){var r=this;if(!u(i))return!1;var o=Object.keys(i);return n.length>0&&n.some((function(t){return-1===o.indexOf(t)}))?(M('shape - at least one of required properties "'+n.join('", "')+'" is not present'),!1):o.every((function(n){if(-1===e.indexOf(n))return!0===r._vueTypes_isLoose||(M('shape - object is missing "'+n+'" property'),!1);var o=t[n];return S(o,i[n])}))}});return Object.defineProperty(i,"_vueTypes_isLoose",{enumerable:!1,writable:!0,value:!1}),Object.defineProperty(i,"loose",{get:function(){return this._vueTypes_isLoose=!0,this},enumerable:!1}),i}};E(D),D.utils={validate:function(t,e){return S(e,t,!0)},toType:j};var $=D,C=(n("d81d"),{drag:HTMLElement,scroll:$.bool.def(!1),touch:$.bool.def(!1),auto:$.bool.def(!1),inertia:$.bool.def(!1),range:$.shape({xmin:Number,xmax:Number,ymin:Number,ymax:Number}).def({}).loose}),L=n("d4ec"),N=n("bee2"),P=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(L["a"])(this,t);var n=e.scroll,i=e.touch,r=e.inertia,o=e.range;this.$dragWrap=e.$dragWrap,this.$drag=e.$drag,this.isScroll=n||!1,this.isTouch=i||!1,this.isInertia=r||!1,this.handleEmitStart=e.syncStart||function(){},this.handleEmitMove=e.syncMove||function(){},this.handleEmitEnd=e.syncEnd||function(){},this.handleEmitClick=e.syncClick||function(){},this.useAutoMove=e.auto,this.setRange(o),this.startTop=0,this.top=0,this.startLeft=0,this.left=0,this.actionMoving=!1,this.inertiaMoving=!1,this.startX=0,this.startY=0,this.moveX=0,this.moveY=0,this.moveStartTime=0,this.lastMoveTime=0,this.startTime=0,this.handler={start:i?"touchstart":"mousedown",move:i?"touchmove":"mousemove",end:i?"touchend":"mouseup",click:"click"},this.handleDragStart=this.handleDragStart.bind(this),this.handleDragMove=this.handleDragMove.bind(this),this.handleDragEnd=this.handleDragEnd.bind(this),this.handleInertiaMove=this.handleInertiaMove.bind(this),this.init()}return Object(N["a"])(t,[{key:"init",value:function(){this.$drag.addEventListener(this.handler.start,this.handleDragStart)}},{key:"setRange",value:function(t){this.useRange=void 0!==t.xmin&&void 0!==t.xmax||void 0!==t.ymin&&void 0!==t.ymax,this.minLeft=this.useRange&&t.xmin,this.maxLeft=this.useRange&&t.xmax,this.minTop=this.useRange&&t.ymin,this.maxTop=this.useRange&&t.ymax}},{key:"handleDragStart",value:function(t){var e=this.isTouch?t.touches[0]:t;t.preventDefault(),t.stopImmediatePropagation(),this.startX=e.pageX,this.startY=e.pageY,this.moveX=e.pageX,this.moveY=e.pageY,this.moveStartTime=0,this.lastMoveTime=0,this.actionMoving=!1,this.inertiaMoving=!1,this.startTime=Date.now(),this.useAutoMove&&(this.startTop=this.isScroll?-this.$dragWrap.scrollTop:0|parseInt(this.$dragWrap.style.top),this.startLeft=0|parseInt(this.$dragWrap.style.left)),document.addEventListener(this.handler.move,this.handleDragMove),document.addEventListener(this.handler.end,this.handleDragEnd),this.handleEmitStart(e.pageX,e.pageY,t)}},{key:"handleDragMove",value:function(t){var e=this;this.actionMoving||(this.actionMoving=!0,requestAnimationFrame((function(){var n=e.isTouch?t.touches[0]:t,i=n.pageX-e.startX,r=n.pageY-e.startY,o=Date.now();if(e.moveX=n.pageX,e.moveY=n.pageY,(!e.moveStartTime||o-e.lastMoveTime>50)&&(e.moveStartTime=o),e.lastMoveTime=o,e.useAutoMove){var a=e.startLeft+i,s=e.startTop+r;e.isScroll?s=s>0?0:Math.max(s,e.minTop):e.useRange&&(s=s<0?0:Math.min(s,e.maxTop),a=a<0?0:Math.min(a,e.maxLeft)),e.left=a,e.top=s}e.handleEmitMove(i,r,e.left,e.top,t),e.actionMoving=!1})))}},{key:"handleDragEnd",value:function(t){document.removeEventListener(this.handler.move,this.handleDragMove),document.removeEventListener(this.handler.end,this.handleDragEnd);var e=Date.now(),n=e-this.moveStartTime;e-this.startTime<200&&this.handleEmitClick(t);var i=this.isInertia&&e-this.lastMoveTime<50;i?(this.inertiaMoving=!0,this.animationSpeed=(this.moveY-this.startY)/n*16,this.handleInertiaMove()):this.handleEmitEnd()}},{key:"handleInertiaMove",value:function(){this.inertiaMoving&&requestAnimationFrame(this.handleInertiaMove);var t=Math.min(Math.abs(this.animationSpeed)/12,.5);if(this.animationSpeed>.2)this.animationSpeed-=t;else{if(!(this.animationSpeed<-.2))return this.animationSpeed=0,this.inertiaMoving=!1,void this.handleEmitEnd();this.animationSpeed+=t}this.moveY+=this.animationSpeed,this.top+=this.animationSpeed,this.handleEmitMove(this.moveX,this.moveY,this.left,this.top),(this.top<this.minTop||this.top>this.maxTop)&&(this.animationSpeed=0)}},{key:"destroy",value:function(){this.$drag.removeEventListener(this.handler.start,this.handleDragStart)}}]),t}(),Y=P,A={name:"gkui-drag-controller",props:Object.assign({child:$.object.isRequired},C),data:function(){return{dragClass:null}},watch:{range:function(t){this.dragClass.setRange(t)}},mounted:function(){var t=this;this.dragClass=new Y({$drag:this.$el.querySelector("[drag]")||this.$el,$dragWrap:this.$el,scroll:this.scroll,touch:this.touch,auto:this.auto,range:this.range,inertia:this.inertia,syncStart:function(e,n,i){t.$emit("start",e,n,i)},syncMove:function(e,n,i,r,o){t.$emit("move",e,n,i,r,o)},syncEnd:function(){t.$emit("end")},syncClick:function(){t.$emit("click-event")}})},beforeDestroy:function(){this.dragClass&&this.dragClass.destroy()},render:function(t){return this.child}},R={functional:!0,props:C,render:function(t,e){e.parent;var n=e.props,i=e.data,r=e.children;return r.map((function(e){if(!e.tag)return e;var r=Object.assign({},i);return r.props=Object.assign({},n),r.props.child=e,t(A,r)}))}},W=n("e40d"),X={data:function(){return{top:0,left:0,auto:!0,thumbRange:{},scrolling:!1,top1:0,top2:0,timer:null}},props:{position:$.shape({top:Number,left:Number}).def({}).loose,range:$.shape({xmin:Number,xmax:Number,ymin:Number,ymax:Number}).def({}).loose,touch:$.bool.def(!0)},computed:{width:function(){return this.$el.clientWidth},height:function(){return this.$el.clientHeight},wrapWidth:function(){return document.documentElement.clientWidth},wrapHeight:function(){return document.documentElement.clientHeight},thumbStyle:function(){return{left:"".concat(this.left,"px"),top:"".concat(this.top,"px")}}},components:{BackWxtime:W["default"],gkDrag:R},created:function(){},mounted:function(){this.initRange(),this.initStyle(),window.addEventListener("scroll",this.listenScroll)},beforeDestroy:function(){window.removeEventListener("scroll",this.listenScroll)},methods:{initRange:function(){var t={xmin:0,xmax:this.wrapWidth-this.width,ymin:0,ymax:this.wrapHeight-this.height};this.thumbRange=Object(o["a"])(Object(o["a"])({},t),this.range)},initStyle:function(){var t=69,e=9,n=0,i=0,r=Object.keys(this.position);r&&r.length>0?(n=this.position.left||0,i=this.position.top||0):(n=this.wrapWidth-this.width-e,i=this.wrapHeight-this.height-t),this.top=i,this.left=n},handleThumbMove:function(t,e,n,i){this.top=i,this.left=n},clickHome:function(){},clickEvent:function(){this.$refs.dialog.open()},open:function(){this.$emit("open")},close:function(){this.$emit("close")},listenScroll:function(){this.scrolling=!0,clearTimeout(this.timer),this.top1=this.getScrollTop(),this.timer=setTimeout(this.isScrollEnd,100)},getScrollTop:function(){return document.documentElement.scrollTop||document.body.scrollTop},isScrollEnd:function(){var t=this;this.top2=this.getScrollTop(),this.top2===this.top1&&setTimeout((function(){t.scrolling=!1}),0)}}},q=X,I=(n("8cd1"),n("2877")),H=Object(I["a"])(q,i,r,!1,null,"b43b7ff0",null);e["default"]=H.exports},d4ec:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));n("d9e2");function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},e40d:function(t,e,n){"use strict";n.r(e);n("b0c0");var i=function(){var t=this,e=t._self._c;return t.showDialog?e("div",{class:[t.wrapClass,"common-dialog"]},[e("div",{staticClass:"common-dialog-mask",on:{click:function(e){return e.stopPropagation(),t.handleMask.apply(null,arguments)}}}),e("transition",{attrs:{name:"fade"}},[e("div",{staticClass:"common-dialog-container"},[e("div",{staticClass:"gkui-dialog-header"},[t._t("header",(function(){return[t._v(" "+t._s(t.title)+" ")]}))],2),e("div",{staticClass:"common-dialog-body"},[t._t("default",(function(){return[e("div",{staticClass:"menu"},t._l(t.menu,(function(n,i){return e("div",{key:i,staticClass:"menu-item",on:{click:function(e){return e.stopPropagation(),t.clickMenu(n)}}},[e("img",{staticClass:"icon",attrs:{src:n.icon}}),e("div",{staticClass:"name"},[e("span",[t._v(t._s(n.name))])])])})),0)]}))],2),e("div",{staticClass:"common-dialog-footer"},[t._t("footer",(function(){return[e("div",{staticClass:"button",on:{click:function(e){return e.stopPropagation(),t.close.apply(null,arguments)}}},[t._v("关闭")])]}))],2)])])],1):t._e()},r=[],o=(n("9911"),{data:function(){return{showDialog:!1,defaultMenu:[{alias:"found",name:"发现",icon:"https://static001.geekbang.org/resource/image/c6/10/c6472d88fab56b1dyy2d763fd6a2cd10.png",link:"https://wxtime.geekbang.org",eventName:""},{alias:"learn",name:"学习",icon:"https://static001.geekbang.org/resource/image/9b/49/9b98a38dda5fe2e03484dcc8e1cf4649.png",link:"https://wxtime.geekbang.org/learn",eventName:""},{alias:"mine",name:"我的",icon:"https://static001.geekbang.org/resource/image/d3/f2/d37ecbbd4b5be4d4348a7507868d0ef2.png",link:"https://wxtime.geekbang.org/mine",eventName:""}],positionList:["top","center","bottom"]}},props:{title:String,wrapClass:String,align:{type:String,default:"center"},list:Array},computed:{menu:function(){return this.list||this.defaultMenu}},mounted:function(){},methods:{open:function(){this.$emit("open"),this.showDialog=!0},close:function(){this.$emit("close"),this.showDialog=!1},handleMask:function(){this.$emit("click-mask"),this.close()},clickMenu:function(t){var e=t.link,n=t.eventName;this.$emit(n),this.close(),e&&(location.href=e)}}}),a=o,s=(n("9411"),n("2877")),u=Object(s["a"])(a,i,r,!1,null,"29fc361e",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-40647412.17255e9d.js.map