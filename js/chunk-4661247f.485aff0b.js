(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4661247f"],{"82ae":function(t,i,o){},c740:function(t,i,o){"use strict";var n=o("23e7"),s=o("b727").findIndex,e=o("44d2"),l="findIndex",c=!0;l in[]&&Array(1)[l]((function(){c=!1})),n({target:"Array",proto:!0,forced:c},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),e(l)},d7b0:function(t,i,o){"use strict";o("82ae")},f3f5:function(t,i,o){"use strict";o.r(i);var n=function(){var t=this,i=t._self._c;return this.points&&this.points.length?i("div",{class:["video-point",{"video-point-mobile":t.isMobile,hide:!this.showVideoPoint&&!t.isMobile},t.orientation],attrs:{orientation:t.orientation},on:{click:function(t){t.stopPropagation()}}},[t.isMobile?[i("div",{staticClass:"video-point-container"},[i("div",{class:["ul-wrap",{"ul-wrap-hide":!t.showVideoPoint,"ul-wrap-hide-landscape":"landscape"===t.orientation&&!t.showVideoPoint}]},[t._t("prefix",(function(){return[t.fold?[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showFoldIcon,expression:"showFoldIcon"}],class:["fold-area",t.orientation],on:{click:function(i){return i.stopPropagation(),t.toggleFold(!1)}}},["landscape"===t.orientation?[i("div",{staticClass:"icon-book"}),i("div",{staticClass:"landscape-fold-area-text"},[t._v("知识点")]),i("div",{staticClass:"icon icon-next"})]:[i("div",{staticClass:"fold-area-text"},[t._v("知识点")]),i("div",{staticClass:"icon icon-next"})]],2)]:[i("div",{directives:[{name:"show",rawName:"v-show",value:t.showFoldIcon,expression:"showFoldIcon"}],class:["unfold-area",t.orientation],on:{click:function(i){return i.stopPropagation(),t.toggleFold(!0)}}},["landscape"===t.orientation?[i("div",{staticClass:"icon-book"}),i("div",{staticClass:"landscape-unfold-area-text"},[t._v("知识点")])]:[i("div",{staticClass:"unfold-area-text"},[t._v("知识点")])]],2)]]})),t.showVideoPoint?i("ul",{ref:"ulEle",staticClass:"list video-point-list mobile-list",style:t.ulStyle,on:{scroll:t.scroll}},t._l(t.points,(function(o,n){return i("li",{key:n,class:{paused:t.vm.paused,active:t.currentTime>=o.period[0]&&t.currentTime<o.period[1]},style:{width:t.liWidth+"px"},on:{click:function(i){return i.stopPropagation(),t.clickItem(o)}}},[t._v(t._s(t._f("formatSecond")(o.seconds))+" "+t._s(o.desc))])})),0):t._e(),t._t("suffix")],2)])]:[t.showVideoPoint?i("div",{staticClass:"video-point-container"},[i("div",{class:["ul-wrap",{"ul-wrap-min":!t.showSwitchBtn}]},[t._t("prefix",(function(){return[t.showSwitchBtn?i("span",{staticClass:"icon icon-prev",on:{click:function(i){return i.stopPropagation(),t.clickPrev.apply(null,arguments)}}}):t._e()]})),i("ul",{ref:"ulEle",staticClass:"list video-point-list",style:t.ulStyle,on:{scroll:t.scroll}},t._l(t.points,(function(o,n){return i("li",{key:n,class:{paused:t.vm.paused,active:t.currentTime>=o.period[0]&&t.currentTime<o.period[1]},style:{width:t.liWidth+"px"},on:{click:function(i){return i.stopPropagation(),t.clickItem(o)}}},[t._v(t._s(t._f("formatSecond")(o.seconds))+" "+t._s(o.desc))])})),0),t._t("suffix",(function(){return[t.showSwitchBtn?i("span",{staticClass:"icon icon-next",on:{click:function(i){return i.stopPropagation(),t.clickNext.apply(null,arguments)}}}):t._e()]}))],2)]):t._e()]],2):t._e()},s=[],e=(o("a15b"),o("d81d"),o("a9e3"),o("c740"),o("9dc7")),l={name:"point",data:function(){return{isMobile:!1,showVideoPoint:!0,points:[],currentTime:0,liWidth:142,scrollLeft:0,events:["resize","orientationchange"],orientation:"",fold:!1,showFoldIcon:!0,scrollMax:0,ulWidth:0,nextScroll:0,isTranslation:!0,currentIndex:-1}},props:{vm:Object,wrapClick:Function,customEvent:Object,list:Array,show:Boolean},filters:{formatSecond:function(t){var i=function(t){return t<10?"0"+t:""+t},o=Math.floor(t/3600),n=Math.floor((t-3600*o)/60),s=Math.floor(t-3600*o-60*n);return(o>0?[o,n,s]:[n,s]).map(i).join(":")}},watch:{"vm.current":{handler:function(t){var i=this;this.currentTime=Math.floor(t),this.showVideoPoint&&this.$nextTick((function(){i.timeupdate(i.currentTime)}))},immediate:!0},"vm.list":{handler:function(t){var i=this;if(t&&t.length){var o=t.length;this.points=t.map((function(t,n,s){return Object.assign({},t,{period:[t.seconds,n<o-1?s[n+1].seconds:i.endTime]})}))}else this.points=[],this.clear()},immediate:!0,deep:!0},show:function(t){this.showVideoPoint=t,this.fold=!t,t&&(this.initSize(),this.toggleTranslation(!1))}},computed:{scrollDistance:function(){return this.liWidth},endTime:function(){return this.vm.player.duration||Number.MAX_VALUE},ulStyle:function(){return this.isTranslation?{"scroll-behavior":"smooth"}:{}},showSwitchBtn:function(){var t=this.points.length;return t>0&&this.liWidth*t>this.ulWidth}},created:function(){this.init()},beforeDestroy:function(){this.reset()},methods:{open:function(){this.isMobile?(this.showVideoPoint=!0,this.fold=!0):this.showVideoPoint=!0},close:function(){this.isMobile?(this.showVideoPoint=!1,this.fold=!1):this.showVideoPoint=!1},clear:function(){this.vm.setVideoPointIcon(!0)},init:function(){this.addEvents(),this.checkMobile(),this.orientationChange(),this.initSize()},initSize:function(){var t=this;setTimeout((function(){t.showVideoPoint&&(t.ulWidth=t.getUlWidth(),t.scrollMax=t.getScroolMax(),t.moveItem(t.currentTime)),t.setVideoPointStatus()}))},getUlWidth:function(){return this.$refs.ulEle&&this.$refs.ulEle.clientWidth},getScroolMax:function(){var t=this.points.length,i=t*this.liWidth-this.ulWidth;return i=i>=0?i:0,i},clickItem:function(t){var i=t.seconds;this.vm.videoPointClick(i),this.customEvent&&this.customEvent.clickItem&&this.customEvent.clickItem()},clickPrev:function(){var t=this.scrollLeft-this.scrollDistance;0!==this.scrollLeft&&this.scrollTo(t),this.customEvent&&this.customEvent.clickPrev&&this.customEvent.clickPrev()},clickNext:function(){var t=this.scrollLeft+this.scrollDistance;this.scrollLeft!==this.scrollMax&&this.scrollTo(t),this.customEvent&&this.customEvent.clickNext&&this.customEvent.clickNext()},scroll:function(t){this.scrollLeft=t.target.scrollLeft},timeupdate:function(t){var i=this.points&&this.points.findIndex((function(i){return t===i.seconds}));-1!==i&&this.currentIndex!==i&&(this.handleMoveDistance(i),this.currentIndex=i)},moveItem:function(t){var i=this.points&&this.points.findIndex((function(i){return t>=i.period[0]&&t<i.period[1]}));-1!==i&&this.showVideoPoint&&this.handleMoveDistance(i)},handleMoveDistance:function(t){var i=this.points.length,o=this.liWidth*i,n=parseFloat(this.ulWidth)/2-parseFloat(this.liWidth)/2,s=t*this.scrollDistance-n;s<0?0!==this.scrollLeft&&this.scrollTo(0):o-this.ulWidth>s?this.scrollTo(s):this.scrollLeft<=this.scrollMax&&this.scrollTo(this.scrollMax)},scrollTo:function(t){var i=parseInt(t);i=i>=this.scrollMax?this.scrollMax:i>0?i:0;var o=this.$refs.ulEle,n=o&&window.getComputedStyle(o);n&&n.scrollBehavior&&"smooth"===n.scrollBehavior?(o.scrollLeft=i,this.scrollLeft=i,this.toggleTranslation(!0)):this.scrollSmoothTo(i)},toggleTranslation:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isTranslation!==t&&(this.isTranslation=t)},reset:function(){this.points=[],this.currentTime=0,this.scrollLeft=0,this.currentIndex=-1,this.removeEvents()},scrollSmoothTo:function(t){var i=this;window.requestAnimationFrame||(window.requestAnimationFrame=function(t,i){return setTimeout(t,17)});var o=this.$refs.ulEle,n=this.scrollLeft,s=function s(){var e=t-n;n+=e/5,Math.abs(e)<1?(o.scrollleft=t,i.toggleTranslation(!0),i.scrollLeft=t):(o.scrollLeft=n,requestAnimationFrame(s))};s()},toggleFold:function(t){this.fold=t,this.showVideoPoint=!t},checkMobile:function(){return this.isMobile=e["a"].isMobile,this.isMobile},addEvents:function(){window.addEventListener(this.events[0],this.resize),window.addEventListener(this.events[1],this.orientationChange)},removeEvents:function(){window.addEventListener(this.events[0],this.resize),window.addEventListener(this.events[1],this.orientationChange)},resize:function(){var t=this;return e["a"].throttle((function(){t.showVideoPoint&&(t.checkMobile(),t.initSize())}))()},orientationChange:function(){var t="";switch(window.orientation){case 180:case 0:t="portrait";break;case 90:case-90:t="landscape";break;default:t="";break}this.orientation=t},setVideoPointStatus:function(){this.points&&this.points.length?this.vm.setVideoPointIcon(this.checkMobile()):this.vm.setVideoPointIcon(!0),this.vm.showVideoPoint=this.showVideoPoint},setIconStatus:function(t){this.fold&&(this.showFoldIcon=t)}}},c=l,r=(o("d7b0"),o("2877")),a=Object(r["a"])(c,n,s,!1,null,"5350a1cf",null);i["default"]=a.exports}}]);
//# sourceMappingURL=chunk-4661247f.485aff0b.js.map