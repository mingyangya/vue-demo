{"version":3,"sources":["webpack:///./node_modules/core-js/internals/string-repeat.js","webpack:///./src/views/player/player.vue?97e5","webpack:///./src/views/player/custom-slider.vue?0976","webpack:///./src/views/player/custom-slider.vue","webpack:///src/views/player/custom-slider.vue","webpack:///./src/views/player/custom-slider.vue?09c2","webpack:///./src/views/player/custom-slider.vue?b36a","webpack:///./node_modules/core-js/modules/es.number.to-fixed.js","webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./src/views/player/player.vue","webpack:///src/views/player/player.vue","webpack:///./src/views/player/player.vue?0510","webpack:///./src/views/player/player.vue?9dce"],"names":["toIntegerOrInfinity","toString","requireObjectCoercible","$RangeError","RangeError","module","exports","count","str","this","result","n","Infinity","render","_vm$markList","_vm","_c","_self","staticClass","ref","markList","length","_l","mark","i","key","style","left","concat","position","on","$event","stopPropagation","clikMark","directives","name","rawName","value","showTip","expression","tipsX","domProps","_s","tips","_e","attrs","input","model","inputValue","callback","$$v","staticRenderFns","props","type","Number","default","duration","marks","Array","data","startLeft","watch","newV","handler","newList","formatData","deep","mounted","$refs","refContent","addEventListener","mousemove","mouseleave","beforeDestroy","removeEventListener","methods","getMarkIndexByDistance","distance","_this","x","getBoundingClientRect","width","clientWidth","xVal","Math","round","parseFloat","toFixed","findIndex","item","isInWithin","start","end","val","event","index","clientX","$emit","list","map","_objectSpread","component","$","uncurryThis","thisNumberValue","$repeat","fails","$String","String","floor","repeat","stringSlice","slice","nativeToFixed","pow","acc","log","x2","multiply","c","c2","divide","dataToString","s","t","FORCED","target","proto","forced","fractionDigits","e","z","j","k","number","fractDigits","sign","$findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","callbackfn","arguments","undefined","class","tag","playerSrc","timeupdate","loadedmetadata","prev","paused","handleClick","next","sliderValue","sliderChange","currentTime","initialPlay","step","components","customSlider","src","validator","includes","toLowerCase","newSrc","console","immediate","play","pause","refPlayer","_event$target","canplay","_event$target2","setSliderValue","setCurrentTime","time"],"mappings":"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","file":"js/chunk-15817417.3470faa9.js","sourcesContent":["'use strict';\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar toString = require('../internals/to-string');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nvar $RangeError = RangeError;\n\n// `String.prototype.repeat` method implementation\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\nmodule.exports = function repeat(count) {\n  var str = toString(requireObjectCoercible(this));\n  var result = '';\n  var n = toIntegerOrInfinity(count);\n  if (n < 0 || n == Infinity) throw $RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--9-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./player.vue?vue&type=style&index=0&id=89a7d630&prod&scoped=true&lang=scss&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/style-resources-loader/lib/index.js??ref--9-oneOf-1-4!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./custom-slider.vue?vue&type=style&index=0&id=445440c8&prod&scoped=true&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"custom-slider\"},[_c('div',{ref:\"refContent\",staticClass:\"custom-slider-container\"},[(_vm.markList?.length)?_c('ul',{staticClass:\"mark\"},[_vm._l((_vm.markList),function(mark,i){return _c('li',{key:i,staticClass:\"mark-li\",style:({ left: `${mark.position}%` }),on:{\"click\":function($event){$event.stopPropagation();return _vm.clikMark(mark)}}})}),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showTip),expression:\"showTip\"}],staticClass:\"custom-tips\",style:({ left: `${_vm.tipsX}%` })},[_c('div',{domProps:{\"innerHTML\":_vm._s(_vm.tips)}})])],2):_vm._e(),_c('el-slider',{staticClass:\"progress-slider\",attrs:{\"show-tooltip\":false},on:{\"change\":_vm.input},model:{value:(_vm.inputValue),callback:function ($$v) {_vm.inputValue=$$v},expression:\"inputValue\"}})],1)])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"custom-slider\">\n    <div class=\"custom-slider-container\" ref=\"refContent\">\n      <ul class=\"mark\" v-if=\"markList?.length\">\n        <li v-for=\"(mark, i) in markList\" :key=\"i\" class=\"mark-li\" :style=\"{ left: `${mark.position}%` }\"\n          @click.stop=\"clikMark(mark)\">\n        </li>\n\n        <div class=\"custom-tips\" :style=\"{ left: `${tipsX}%` }\" v-show=\"showTip\">\n          <div v-html=\"tips\"></div>\n        </div>\n      </ul>\n      <el-slider v-model=\"inputValue\" class=\"progress-slider\" :show-tooltip=\"false\" @change=\"input\">\n      </el-slider>\n    </div>\n  </div>\n</template>\n\n<script>\n\nexport default {\n  props: {\n    value: {\n      type: Number,\n      default: 0,\n    },\n    duration: Number,\n    marks: Array,\n  },\n  data () {\n    return {\n      inputValue: 0,\n      // markList: [{desc: '', time: 0, start: 0, end: 0}],\n      markList: [],\n      startLeft: 0,\n      showTip: false,\n      tips: '',\n      tipsX: 0, // x坐标\n    }\n  },\n  watch: {\n    value (newV) {\n      this.inputValue = newV\n    },\n\n    marks: {\n      handler: function (newList) {\n        this.formatData(newList, this.duration)\n      },\n      deep: true,\n    },\n\n    duration (newV) {\n      this.formatData(this.marks, newV)\n    }\n  },\n\n  mounted () {\n    this.$refs.refContent.addEventListener('mousemove', this.mousemove)\n    this.$refs.refContent.addEventListener('mouseleave', this.mouseleave)\n  },\n\n  beforeDestroy () {\n    this.$refs.refContent.removeEventListener('mousemove', this.mousemove)\n    this.$refs.refContent.removeEventListener('mouseleave', this.mouseleave)\n  },\n\n  methods: {\n    mouseleave () {\n      this.tips = ''\n      this.showTip = false\n    },\n\n    // 获取滑动位置位于那个mark区间\n    getMarkIndexByDistance (distance) {\n\n\n      const x = distance - this.$refs.refContent.getBoundingClientRect().left // 滑动位置相对于滑动区域（refContent）x 坐标\n      const width = this.$refs.refContent.clientWidth\n\n      // 相对百分比值\n      const xVal = Math.round((parseFloat(x * 100) / width).toFixed())\n      this.tipsX = xVal\n\n      return this.markList.findIndex(item => this.isInWithin(xVal, item.start, item.end,))\n    },\n\n    // 是否在区间内\n    isInWithin (val, start, end) {\n      return (val >= start) && (val <= end)\n    },\n\n    mousemove (event) {\n      const index = this.getMarkIndexByDistance(event.clientX)\n\n      if (index !== -1) {\n        // 显示tips\n\n        this.showTip = true\n        this.tips = this.markList[index].name\n      } else {\n        this.showTip = false\n      }\n    },\n\n    input (val) {\n      // console.log('滑块的值发生变化', val)\n      this.$emit('change', val)\n    },\n\n    formatData (list, duration) {\n      this.markList = (list || []).map(item => {\n        // 百分比位置，相对于（refContent）\n        const start = Math.round(+(parseFloat(item.start * 100) / duration).toFixed())\n        const end = Math.round((+parseFloat(item.end * 100) / duration).toFixed())\n\n        return {\n          ...item,\n          position: start,\n          start,\n          end\n        }\n      })\n    },\n\n    clikMark (mark) {\n      this.inputValue = mark\n    }\n  },\n}\n</script>\n\n<style scoped lang=\"scss\">\n.custom-slider {\n  $sliderInnerH: 20px; // 进度条高度\n\n  .custom-slider-container {\n    position: relative;\n    pointer-events: all;\n    width: 100%;\n    height: 100%;\n  }\n\n  .custom-slider-bg {\n    position: absolute;\n    top: -6px;\n    left: 0;\n    width: 100%;\n    height: 22px;\n    background-size: cover;\n  }\n\n  @include deep('.el-slider__marks') {\n    display: none;\n  }\n\n  @include deep('.el-slider__runway') {\n    background-color: #9CC6FF;\n  }\n\n  @include deep('.el-slider__bar') {\n    background-color: #3A8DFF;\n  }\n\n  @include deep('.el-slider__button') {\n    background-color: #3A8DFF;\n\n  }\n\n  .mark {\n    position: absolute;\n    z-index: 2;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    margin: auto;\n    @apply flex;\n    width: 100%;\n    height: 0;\n    pointer-events: all;\n  }\n\n  .mark-li {\n    position: absolute;\n    top: 0;\n    transform: translate(-3px, -50%);\n    width: 6px;\n    height: 6px;\n    border-radius: 50%;\n    background-color: #fff;\n    cursor: pointer;\n    pointer-events: all;\n  }\n\n  .custom-tips {\n    position: absolute;\n    bottom: 20px;\n    transform: translateX(-50%);\n    width: 200px;\n    height: auto;\n    @apply p-3;\n    background-color: #3A8DFF;\n    border-radius: 6px;\n    color: #fff;\n\n    &:before {\n      content: '';\n      position: absolute;\n      bottom: 0;\n      left: 50%;\n      transform: translate(-50%, 100%);\n      width: 0;\n      height: 0;\n      border: 6px solid;\n      border-color: #3A8DFF transparent transparent transparent;\n    }\n\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./custom-slider.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./custom-slider.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./custom-slider.vue?vue&type=template&id=445440c8&scoped=true&\"\nimport script from \"./custom-slider.vue?vue&type=script&lang=js&\"\nexport * from \"./custom-slider.vue?vue&type=script&lang=js&\"\nimport style0 from \"./custom-slider.vue?vue&type=style&index=0&id=445440c8&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"445440c8\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar $ = require('../internals/export');\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar toIntegerOrInfinity = require('../internals/to-integer-or-infinity');\nvar thisNumberValue = require('../internals/this-number-value');\nvar $repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar $RangeError = RangeError;\nvar $String = String;\nvar floor = Math.floor;\nvar repeat = uncurryThis($repeat);\nvar stringSlice = uncurryThis(''.slice);\nvar nativeToFixed = uncurryThis(1.0.toFixed);\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar multiply = function (data, n, c) {\n  var index = -1;\n  var c2 = c;\n  while (++index < 6) {\n    c2 += n * data[index];\n    data[index] = c2 % 1e7;\n    c2 = floor(c2 / 1e7);\n  }\n};\n\nvar divide = function (data, n) {\n  var index = 6;\n  var c = 0;\n  while (--index >= 0) {\n    c += data[index];\n    data[index] = floor(c / n);\n    c = (c % n) * 1e7;\n  }\n};\n\nvar dataToString = function (data) {\n  var index = 6;\n  var s = '';\n  while (--index >= 0) {\n    if (s !== '' || index === 0 || data[index] !== 0) {\n      var t = $String(data[index]);\n      s = s === '' ? t : s + repeat('0', 7 - t.length) + t;\n    }\n  } return s;\n};\n\nvar FORCED = fails(function () {\n  return nativeToFixed(0.00008, 3) !== '0.000' ||\n    nativeToFixed(0.9, 0) !== '1' ||\n    nativeToFixed(1.255, 2) !== '1.25' ||\n    nativeToFixed(1000000000000000128.0, 0) !== '1000000000000000128';\n}) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.es/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toIntegerOrInfinity(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    // TODO: ES2018 increased the maximum number of fraction digits to 100, need to improve the implementation\n    if (fractDigits < 0 || fractDigits > 20) throw $RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return $String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(data, 0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(data, 1e7, 0);\n          j -= 7;\n        }\n        multiply(data, pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(data, 1 << 23);\n          j -= 23;\n        }\n        divide(data, 1 << j);\n        multiply(data, 1, 1);\n        divide(data, 2);\n        result = dataToString(data);\n      } else {\n        multiply(data, 0, z);\n        multiply(data, 1 << -e, 0);\n        result = dataToString(data) + repeat('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat('0', fractDigits - k) + result\n        : stringSlice(result, 0, k - fractDigits) + '.' + stringSlice(result, k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\n// eslint-disable-next-line es/no-array-prototype-findindex -- testing\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"meeting-player\"},[_c('div',{staticClass:\"meeting-player-container w-full\"},[_c('div',{class:['player-area', _vm.type +'-area']},[_c(_vm.type,{ref:\"refPlayer\",tag:\"components\",attrs:{\"src\":_vm.playerSrc},on:{\"timeupdate\":_vm.timeupdate,\"loadedmetadata\":_vm.loadedmetadata}})],1),_c('div',{staticClass:\"ctrl-area flex items-center\"},[_c('div',{staticClass:\"btn-group\"},[_c('i',{staticClass:\"ctrl-btn prev el-icon-arrow-left\",on:{\"click\":_vm.prev}}),_c('i',{class:['ctrl-btn play ml-2', _vm.paused ? 'el-icon-video-play' : 'el-icon-video-pause'],on:{\"click\":_vm.handleClick}}),_c('i',{staticClass:\"el-icon-arrow-right ctrl-btn next ml-2\",on:{\"click\":_vm.next}})]),_c('div',{staticClass:\"progress flex-1 ml-4\"},[_c('customSlider',{attrs:{\"value\":_vm.sliderValue,\"marks\":_vm.marks,\"duration\":_vm.duration},on:{\"change\":_vm.sliderChange}})],1)])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"meeting-player\">\n    <div class=\"meeting-player-container w-full\">\n      <div :class=\"['player-area', type +'-area']\">\n        <components :src=\"playerSrc\" :is=\"type\" ref=\"refPlayer\" @timeupdate=\"timeupdate\" @loadedmetadata=\"loadedmetadata\">\n        </components>\n      </div>\n\n      <div class=\"ctrl-area flex items-center\">\n        <div class=\"btn-group\">\n          <i class=\"ctrl-btn prev el-icon-arrow-left\" @click=\"prev\"></i>\n          <i :class=\"['ctrl-btn play ml-2', paused ? 'el-icon-video-play' : 'el-icon-video-pause']\"\n            @click=\"handleClick\"></i>\n          <i class=\"el-icon-arrow-right ctrl-btn  next ml-2\" @click=\"next\"></i>\n        </div>\n\n        <div class=\"progress flex-1 ml-4\">\n          <customSlider :value=\"sliderValue\" :marks=\"marks\" :duration=\"duration\" @change=\"sliderChange\"></customSlider>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport customSlider from './custom-slider.vue'\n\nexport default {\n  data () {\n    return {\n      // playerSrc: 'https://raw.githubusercontent.com/djlxiaoshi/Audio/master/mp3/%E6%A8%8A%E5%87%A1%20-%20%E4%B8%8D%E8%A6%81%E5%B0%B1%E8%BF%99%E6%A0%B7%E7%A6%BB%E5%BC%80%E6%88%91.mp3',\n      playerSrc: '',\n      duration: 0,\n      currentTime: 0,\n      sliderValue: 0, // 滑块的值 【0-100】\n      paused: true, // 音频播放状态\n      initialPlay: false,\n      step: 15, // 快进、快退的秒数\n    }\n  },\n  components: {\n    customSlider\n  },\n  props: {\n    src: String,\n    marks: Array,\n    type: {\n      type: String,\n      default: 'audio',\n      validator: function (value) {\n        return ['audio', 'video'].includes(value.toLowerCase())\n      }\n    }\n  },\n  watch: {\n    src: {\n      handler: function (newSrc) {\n        console.log(newSrc, 'newSrc')\n        this.playerSrc = newSrc\n      },\n      immediate: true\n    },\n  },\n  methods: {\n    handleClick () {\n      this.paused ? this.play() : this.pause()\n    },\n    play () {\n      this.paused = false\n      this.$refs.refPlayer.play()\n    },\n    pause () {\n      this.paused = true\n      this.$refs.refPlayer.pause()\n    },\n\n    loadedmetadata (event) {\n      const { duration, currentTime, paused } = event.target\n\n      this.paused = paused\n      this.duration = duration\n      this.currentTime = currentTime\n\n      console.log('loadedmetadata')\n    },\n\n    canplay () {\n      const { duration } = event.target\n\n      console.log('canplay')\n\n      this.duration = duration\n    },\n\n    timeupdate (event) {\n      const { paused, currentTime } = event.target\n\n      this.currentTime = currentTime\n      this.paused = paused\n      this.setSliderValue()\n\n      console.log('timeupdate')\n\n      this.$emit('timeupdate', currentTime)\n    },\n\n\n    prev () {\n      const currentTime = this.currentTime - this.step <= 0 ? 0.01 : this.currentTime - this.step\n\n      this.setCurrentTime(currentTime)\n    },\n\n    next () {\n      const currentTime = this.currentTime + this.step >= this.duration ? this.duration : this.currentTime + this.step\n\n      this.setCurrentTime(currentTime)\n    },\n\n    setCurrentTime (time) {\n      this.currentTime = time\n      this.$refs.refPlayer.currentTime = time\n    },\n\n    setSliderValue () {\n      // 获取进度百分比\n      const value = Math.round(this.currentTime * 100 / this.duration)\n\n      this.sliderValue = value\n    },\n\n    sliderChange (value) {\n      const currentTime = Math.round((parseFloat(this.duration) * value / 100).toFixed(2))\n\n      this.setCurrentTime(currentTime)\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n$width: 500px;\n$height: $width * 3 / 4;\n\n.meeting-player {\n  width: $width;\n  margin: 0 auto;\n}\n\n.meeting-player-container {\n  background-color: #000;\n}\n\n\n.btn-group {\n  @apply flex;\n\n  .el-button {\n    all: unset;\n    background-color: transparent;\n    cursor: pointer;\n\n    ::v-deep>span {\n      display: block;\n      width: 100%;\n      // height: 100%;\n    }\n  }\n\n  .el-button--prev {\n    .el-image {\n      width: 18px;\n      height: 21px;\n    }\n  }\n\n  .el-button--ctrl {\n    .el-image {\n      width: 30px;\n      height: 30px;\n    }\n  }\n\n  .el-button--next {\n    .el-image {\n      width: 18px;\n      height: 21px;\n    }\n  }\n}\n\n.ctrl-area {\n  background-color: #e5e2e2;\n  @apply px-3;\n}\n\n.ctrl-btn {\n  color: #3A8DFF;\n  font-size: 24px;\n  cursor: pointer;\n}\n\n.player-area {\n  width: 100%;\n  height: auto;\n\n  >audio,\n  video {\n    width: 100%;\n    height: $height;\n  }\n\n  audio {\n    min-height: 30px;\n  }\n}\n\n.progress {\n  @apply px-2;\n\n  @include deep('.el-slider__marks') {\n    display: none;\n  }\n\n  @include deep('.el-slider__runway') {\n    background-color: #9CC6FF;\n  }\n\n  @include deep('.el-slider__bar') {\n    background-color: #3A8DFF;\n  }\n\n  @include deep('.el-slider__button') {\n    background-color: #3A8DFF;\n    border-color: #9CC6FF;\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./player.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./player.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./player.vue?vue&type=template&id=89a7d630&scoped=true&\"\nimport script from \"./player.vue?vue&type=script&lang=js&\"\nexport * from \"./player.vue?vue&type=script&lang=js&\"\nimport style0 from \"./player.vue?vue&type=style&index=0&id=89a7d630&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"89a7d630\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}