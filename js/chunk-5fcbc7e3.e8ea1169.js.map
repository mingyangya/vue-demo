{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.array.find-index.js","webpack:///./src/components/player/components/VideoPoint.vue?5da8","webpack:///./src/components/player/components/VideoPoint.vue","webpack:///src/components/player/components/VideoPoint.vue","webpack:///./src/components/player/components/VideoPoint.vue?dabe","webpack:///./src/components/player/components/VideoPoint.vue?1854"],"names":["$","$findIndex","findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","Array","target","proto","forced","callbackfn","this","arguments","length","undefined","render","_vm","_c","_self","points","class","isMobile","hide","showVideoPoint","orientation","attrs","on","$event","stopPropagation","staticClass","_t","fold","directives","name","rawName","value","showFoldIcon","expression","toggleFold","_v","ref","style","ulStyle","scroll","_l","item","i","key","vm","paused","currentTime","period","liWidth","clickItem","_s","_f","seconds","desc","_e","showSwitchBtn","clickPrev","apply","clickNext","staticRenderFns","data","scrollLeft","events","scrollMax","ulWidth","nextScroll","isTranslation","currentIndex","props","Object","wrapClick","Function","customEvent","list","show","Boolean","filters","formatSecond","second","add0","num","hour","Math","floor","min","sec","map","join","watch","handler","time","_this","$nextTick","timeupdate","immediate","_this2","listLen","arr","assign","endTime","clear","deep","val","initSize","toggleTranslation","computed","scrollDistance","player","duration","Number","MAX_VALUE","pointsLen","created","init","beforeDestroy","reset","methods","open","close","setVideoPointIcon","addEvents","checkMobile","orientationChange","_this3","setTimeout","getUlWidth","getScroolMax","moveItem","setVideoPointStatus","$refs","ulEle","clientWidth","len","totalWidth","_ref","videoPointClick","distance","scrollTo","e","index","handleMoveDistance","allLiWidth","offsetX","parseFloat","_distance","parseInt","window","getComputedStyle","scrollBehavior","scrollSmoothTo","status","removeEvents","position","_this4","requestAnimationFrame","callback","element","step","abs","scrollleft","utils","addEventListener","resize","_this5","throttle","result","setIconStatus","component"],"mappings":"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","file":"js/chunk-5fcbc7e3.e8ea1169.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\n// eslint-disable-next-line es/no-array-prototype-findindex -- testing\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--9-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoPoint.vue?vue&type=style&index=0&id=5350a1cf&prod&scoped=true&lang=scss&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return (this.points && this.points.length)?_c('div',{class:['video-point', {'video-point-mobile': _vm.isMobile, hide: !this.showVideoPoint && !_vm.isMobile}, _vm.orientation],attrs:{\"orientation\":_vm.orientation},on:{\"click\":function($event){$event.stopPropagation();}}},[(!_vm.isMobile)?[(_vm.showVideoPoint)?_c('div',{staticClass:\"video-point-container\"},[_c('div',{class:['ul-wrap', {'ul-wrap-min': !_vm.showSwitchBtn}]},[_vm._t(\"prefix\",function(){return [(_vm.showSwitchBtn)?_c('span',{staticClass:\"icon icon-prev\",on:{\"click\":function($event){$event.stopPropagation();return _vm.clickPrev.apply(null, arguments)}}}):_vm._e()]}),_c('ul',{ref:\"ulEle\",staticClass:\"list video-point-list\",style:(_vm.ulStyle),on:{\"scroll\":_vm.scroll}},_vm._l((_vm.points),function(item,i){return _c('li',{key:i,class:{ 'paused' : _vm.vm.paused, 'active': (_vm.currentTime >= item.period[0]) && (_vm.currentTime < item.period[1])},style:({'width': _vm.liWidth + 'px' }),on:{\"click\":function($event){$event.stopPropagation();return _vm.clickItem(item)}}},[_vm._v(_vm._s(_vm._f(\"formatSecond\")(item.seconds))+\" \"+_vm._s(item.desc))])}),0),_vm._t(\"suffix\",function(){return [(_vm.showSwitchBtn)?_c('span',{staticClass:\"icon icon-next\",on:{\"click\":function($event){$event.stopPropagation();return _vm.clickNext.apply(null, arguments)}}}):_vm._e()]})],2)]):_vm._e()]:[_c('div',{staticClass:\"video-point-container\"},[_c('div',{class:['ul-wrap', {'ul-wrap-hide': !_vm.showVideoPoint, 'ul-wrap-hide-landscape': (_vm.orientation === 'landscape') && !_vm.showVideoPoint}]},[_vm._t(\"prefix\",function(){return [(_vm.fold)?[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showFoldIcon),expression:\"showFoldIcon\"}],class:['fold-area', _vm.orientation],on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleFold(false)}}},[(_vm.orientation === 'landscape')?[_c('div',{staticClass:\"icon-book\"}),_c('div',{staticClass:\"landscape-fold-area-text\"},[_vm._v(\"知识点\")]),_c('div',{staticClass:\"icon icon-next\"})]:[_c('div',{staticClass:\"fold-area-text\"},[_vm._v(\"知识点\")]),_c('div',{staticClass:\"icon icon-next\"})]],2)]:[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showFoldIcon),expression:\"showFoldIcon\"}],class:['unfold-area', _vm.orientation],on:{\"click\":function($event){$event.stopPropagation();return _vm.toggleFold(true)}}},[(_vm.orientation === 'landscape')?[_c('div',{staticClass:\"icon-book\"}),_c('div',{staticClass:\"landscape-unfold-area-text\"},[_vm._v(\"知识点\")])]:[_c('div',{staticClass:\"unfold-area-text\"},[_vm._v(\"知识点\")])]],2)]]}),(_vm.showVideoPoint)?_c('ul',{ref:\"ulEle\",staticClass:\"list video-point-list mobile-list\",style:(_vm.ulStyle),on:{\"scroll\":_vm.scroll}},_vm._l((_vm.points),function(item,i){return _c('li',{key:i,class:{ 'paused' : _vm.vm.paused, 'active': (_vm.currentTime >= item.period[0]) && (_vm.currentTime < item.period[1])},style:({'width': _vm.liWidth + 'px' }),on:{\"click\":function($event){$event.stopPropagation();return _vm.clickItem(item)}}},[_vm._v(_vm._s(_vm._f(\"formatSecond\")(item.seconds))+\" \"+_vm._s(item.desc))])}),0):_vm._e(),_vm._t(\"suffix\")],2)])]],2):_vm._e()\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div :class=\"['video-point', {'video-point-mobile': isMobile, hide: !this.showVideoPoint && !isMobile}, orientation]\" :orientation=\"orientation\" v-if=\"this.points && this.points.length\" @click.stop=\"\">\n    <template v-if=\"!isMobile\">\n      <div class=\"video-point-container\" v-if=\"showVideoPoint\">\n        <div :class=\"['ul-wrap', {'ul-wrap-min': !showSwitchBtn}]\">\n          <slot name=\"prefix\">\n            <span class=\"icon icon-prev\" @click.stop=\"clickPrev\" v-if=\"showSwitchBtn\"></span>\n          </slot>\n\n          <ul class=\"list video-point-list\" @scroll=\"scroll\" ref=\"ulEle\" :style=\"ulStyle\" >\n            <li v-for=\"(item, i) in points\" :key=\"i\" @click.stop=\"clickItem(item)\" :class=\"{ 'paused' : vm.paused, 'active': (currentTime >= item.period[0]) && (currentTime < item.period[1])}\" :style=\"{'width': liWidth + 'px' }\">{{item.seconds | formatSecond}} {{item.desc}}</li>\n          </ul>\n\n          <slot name=\"suffix\">\n            <span class=\"icon icon-next\" @click.stop=\"clickNext\" v-if=\"showSwitchBtn\"></span>\n          </slot>\n        </div>\n      </div>\n    </template>\n\n    <template v-else>\n      <div class=\"video-point-container\">\n\n        <div :class=\"['ul-wrap', {'ul-wrap-hide': !showVideoPoint, 'ul-wrap-hide-landscape': (orientation === 'landscape') && !showVideoPoint}]\">\n          <!-- 前缀 -->\n          <slot name=\"prefix\">\n            <!-- 折叠 -->\n            <template v-if=\"fold\">\n              <div :class=\"['fold-area', orientation]\" @click.stop=\"toggleFold(false)\" v-show=\"showFoldIcon\">\n                <!-- 横屏 -->\n                <template v-if=\"orientation === 'landscape'\">\n                  <div class=\"icon-book\"></div>\n                  <div class=\"landscape-fold-area-text\">知识点</div>\n                  <div class=\"icon icon-next\"></div>\n                </template>\n\n                <template v-else>\n                  <div class=\"fold-area-text\">知识点</div>\n                  <div class=\"icon icon-next\"></div>\n                </template>\n              </div>\n            </template>\n\n            <template v-else>\n              <div :class=\"['unfold-area', orientation]\" @click.stop=\"toggleFold(true)\" v-show=\"showFoldIcon\">\n                <template v-if=\"orientation === 'landscape'\">\n                  <div class=\"icon-book\"></div>\n                  <div class=\"landscape-unfold-area-text\">知识点</div>\n                </template>\n\n                <template v-else>\n                  <div class=\"unfold-area-text\">知识点</div>\n                </template>\n\n              </div>\n            </template>\n          </slot>\n\n          <ul class=\"list video-point-list mobile-list\" @scroll=\"scroll\" ref=\"ulEle\" :style=\"ulStyle\" v-if=\"showVideoPoint\">\n            <li v-for=\"(item, i) in points\" :key=\"i\" @click.stop=\"clickItem(item)\" :class=\"{ 'paused' : vm.paused, 'active': (currentTime >= item.period[0]) && (currentTime < item.period[1])}\" :style=\"{'width': liWidth + 'px' }\">{{item.seconds | formatSecond}} {{item.desc}}</li>\n          </ul>\n\n          <!-- 后缀 -->\n          <slot name=\"suffix\"></slot>\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n\n<script>\nimport utils from '../lib/utils'\nexport default {\n  name: 'point',\n  data () {\n    return {\n      isMobile: false,\n      showVideoPoint: true,\n      points: [],\n      currentTime: 0,\n      liWidth: 142, // 每项的宽度\n      scrollLeft: 0,\n      events: ['resize', 'orientationchange'],\n      orientation: '', // portrait 竖屏，landscape 横屏\n      fold: false, // 是否折叠, 默认展开\n      showFoldIcon: true, // mobile 视频点图标\n      scrollMax: 0, // 可滚动的最大距离\n      ulWidth: 0,\n      nextScroll: 0, // 下次滚动的距离\n      isTranslation: true,\n      currentIndex: -1\n    }\n  },\n  props: {\n    vm: Object,\n    wrapClick: Function,\n    customEvent: Object,\n    list: Array,\n    show: Boolean\n  },\n  filters: {\n    // s（秒）转化为hh（时）:mm（分）:ss（秒）\n    formatSecond (second) {\n      const add0 = num => (num < 10 ? '0' + num : '' + num)\n      const hour = Math.floor(second / 3600)\n      const min = Math.floor((second - hour * 3600) / 60)\n      const sec = Math.floor(second - hour * 3600 - min * 60)\n      return (hour > 0 ? [hour, min, sec] : [min, sec]).map(add0).join(':')\n    }\n  },\n  watch: {\n    'vm.current': {\n      handler (time) {\n        this.currentTime = Math.floor(time)\n        // 组件不渲染，不处理视频进度\n        if (this.showVideoPoint) {\n          // 处理激活项的位置\n          this.$nextTick(() => {\n            this.timeupdate(this.currentTime)\n          })\n        }\n      },\n      immediate: true\n    },\n    'vm.list': {\n      handler (list) {\n        if (list && list.length) {\n          const listLen = list.length\n          this.points = list.map((item, i, arr) => Object.assign({}, item, {period: [item.seconds, i < listLen - 1 ? arr[i + 1].seconds : this.endTime]}))\n        } else {\n          this.points = []\n          this.clear()\n        }\n      },\n      immediate: true,\n      deep: true\n    },\n    show (val) {\n      this.showVideoPoint = val\n      this.fold = !val\n      // 视频点展开，处理初始状态\n      if (val) {\n        this.initSize()\n        this.toggleTranslation(false)\n      }\n    }\n  },\n  computed: {\n    // 每次滑动的距离\n    scrollDistance () {\n      return this.liWidth\n    },\n    endTime () {\n      return this.vm.player.duration || Number.MAX_VALUE\n    },\n    ulStyle () {\n      return this.isTranslation ? {'scroll-behavior': 'smooth'} : {}\n    },\n    showSwitchBtn () {\n      const pointsLen = this.points.length\n      return pointsLen > 0 ? this.liWidth * pointsLen > this.ulWidth : false\n    }\n  },\n  created () {\n    this.init()\n  },\n  beforeDestroy () {\n    this.reset()\n  },\n  methods: {\n    open () {\n      if (this.isMobile) {\n        this.showVideoPoint = true\n        this.fold = true\n      } else {\n        this.showVideoPoint = true\n      }\n    },\n\n    close () {\n      if (this.isMobile) {\n        this.showVideoPoint = false\n        this.fold = false\n      } else {\n        this.showVideoPoint = false\n      }\n    },\n\n    // 列表数据为空, 隐藏知识点图标\n    clear () {\n      this.vm.setVideoPointIcon(true)\n    },\n\n    init () {\n      this.addEvents()\n      this.checkMobile()\n      this.orientationChange()\n      this.initSize()\n    },\n\n    // 计算滑动的距离，滑动区域的宽度，更新激活视频点的位置\n    initSize () {\n      setTimeout(() => {\n        if (this.showVideoPoint) {\n          this.ulWidth = this.getUlWidth()\n          this.scrollMax = this.getScroolMax()\n          this.moveItem(this.currentTime)\n        }\n        this.setVideoPointStatus()\n      })\n    },\n\n    // 视频点区域宽度\n    getUlWidth () {\n      return this.$refs.ulEle && this.$refs.ulEle.clientWidth\n    },\n\n    // 滑动的最大值\n    getScroolMax () {\n      const len = this.points.length\n      let totalWidth = len * this.liWidth - this.ulWidth\n\n      totalWidth = totalWidth >= 0 ? totalWidth : 0\n\n      return totalWidth\n    },\n\n    clickItem ({ seconds }) {\n      this.vm.videoPointClick(seconds)\n      this.customEvent && this.customEvent.clickItem && this.customEvent.clickItem()\n    },\n\n    clickPrev () {\n      const distance = this.scrollLeft - this.scrollDistance\n      if (this.scrollLeft !== 0) {\n        this.scrollTo(distance)\n      }\n      this.customEvent && this.customEvent.clickPrev && this.customEvent.clickPrev()\n    },\n\n    clickNext () {\n      const distance = this.scrollLeft + this.scrollDistance\n      if (this.scrollLeft !== this.scrollMax) {\n        this.scrollTo(distance)\n      }\n      this.customEvent && this.customEvent.clickNext && this.customEvent.clickNext()\n    },\n\n    scroll (e) {\n      this.scrollLeft = e.target.scrollLeft\n    },\n\n    timeupdate (time) {\n      // 视频正在播放的时间点 在视频点列表中的索引\n      const index = this.points && this.points.findIndex(item => time === item.seconds)\n      if (index !== -1 && this.currentIndex !== index) { // 同一秒内触发仅触发一次更新\n        this.handleMoveDistance(index)\n        this.currentIndex = index\n      }\n    },\n\n    // 激活时间点（time）所处的项，并移动视频点的到相对位置\n    moveItem (time) {\n      // 视频正在播放的时间点 在视频点所处区间的索引\n      const index = this.points && this.points.findIndex(item => (time >= item.period[0] && time < item.period[1]))\n      if (index !== -1 && this.showVideoPoint) {\n        this.handleMoveDistance(index)\n      }\n    },\n\n    // 处理偏移的距离\n    handleMoveDistance (index) {\n      const pointsLen = this.points.length\n      const allLiWidth = this.liWidth * pointsLen\n      const offsetX = parseFloat(this.ulWidth) / 2 - parseFloat(this.liWidth) / 2 // 居中所需要偏移的个数\n      const distance = (index) * this.scrollDistance - offsetX // 居中所需要偏移的距离\n\n      if (distance < 0) {\n        if (this.scrollLeft !== 0) {\n          this.scrollTo(0)\n        }\n      } else if (allLiWidth - this.ulWidth > distance) {\n        this.scrollTo(distance)\n      } else {\n        if (this.scrollLeft <= this.scrollMax) {\n          this.scrollTo(this.scrollMax)\n        }\n      }\n    },\n\n    scrollTo (distance) {\n      let _distance = parseInt(distance)\n      _distance = _distance >= this.scrollMax ? this.scrollMax : (_distance > 0 ? _distance : 0)\n      const ulEle = this.$refs.ulEle\n      const style = ulEle && window.getComputedStyle(ulEle)\n      if (style && style.scrollBehavior && style.scrollBehavior === 'smooth') {\n        // safari 14.0.x scrollBehavior有默认值 auto，safari 14.1.x scrollBehavior为undefined\n        ulEle.scrollLeft = _distance\n        this.scrollLeft = _distance\n        this.toggleTranslation(true)\n      } else {\n        // 兼容不支持scrollBehavior的浏览器\n        this.scrollSmoothTo(_distance)\n      }\n    },\n\n    // 滑动是否需要过渡效果\n    toggleTranslation (status = true) {\n      if (this.isTranslation !== status) {\n        this.isTranslation = status\n      }\n    },\n\n    reset () {\n      this.points = []\n      this.currentTime = 0\n      this.scrollLeft = 0\n      this.currentIndex = -1\n\n      this.removeEvents()\n    },\n\n    // 模拟平滑滚动\n    scrollSmoothTo (position) {\n      if (!window.requestAnimationFrame) {\n        window.requestAnimationFrame = function (callback, element) {\n          return setTimeout(callback, 17)\n        }\n      }\n\n      const ulEle = this.$refs.ulEle\n      // 当前滚动距离\n      let scrollLeft = this.scrollLeft\n      // 滚动step方法\n      const step = () => {\n        // 距离目标滚动距离\n        const distance = position - scrollLeft\n        // 目标滚动位置\n        scrollLeft = scrollLeft + distance / 5\n        if (Math.abs(distance) < 1) {\n          ulEle.scrollleft = position\n          this.toggleTranslation(true)\n          this.scrollLeft = position\n        } else {\n          ulEle.scrollLeft = scrollLeft\n          requestAnimationFrame(step)\n        }\n      }\n\n      step()\n    },\n\n    // 展开知识点\n    toggleFold (status) {\n      this.fold = status\n      this.showVideoPoint = !status\n    },\n\n    // 校验是否为手机端\n    checkMobile () {\n      this.isMobile = utils.isMobile\n      return this.isMobile\n    },\n\n    addEvents () {\n      window.addEventListener(this.events[0], this.resize)\n      window.addEventListener(this.events[1], this.orientationChange)\n    },\n\n    removeEvents () {\n      window.addEventListener(this.events[0], this.resize)\n      window.addEventListener(this.events[1], this.orientationChange)\n    },\n\n    resize () {\n      return utils.throttle(() => {\n        if (this.showVideoPoint) {\n          this.checkMobile()\n          this.initSize()\n        }\n      })()\n    },\n\n    // 屏幕旋转\n    orientationChange () {\n      let result = ''\n      switch (window.orientation) {\n        // 竖屏\n        case 180:\n        case 0:\n          result = 'portrait'\n          break\n        // 横屏\n        case 90:\n        case -90:\n          result = 'landscape'\n          break\n        default:\n          result = ''\n          break\n      }\n      this.orientation = result\n    },\n\n    // 设置视频播放器视频点图标显示状态\n    // mobile： 隐藏pc视频点图标\n    // pc：依据showVideoPoint设置pc视频点图标的状态\n    setVideoPointStatus () {\n      if (this.points && this.points.length) {\n        this.vm.setVideoPointIcon(this.checkMobile())\n      } else {\n        this.vm.setVideoPointIcon(true)\n      }\n      this.vm.showVideoPoint = this.showVideoPoint\n    },\n\n    // mobile 视频点图标状态\n    setIconStatus (status) {\n      // 折叠状态下， 随视频进度条显隐\n      if (this.fold) {\n        this.showFoldIcon = status\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n$h: 54px;\n$color: #fff;\n$activeColor: #FFAF44;\n\n.video-point {\n  box-sizing: border-box;\n  position: absolute;\n  bottom: 56px;\n  left: 0;\n  width: 100%;\n  height: $h;\n  padding: 0 10px;\n\n  &.hide {\n    display: none;\n  }\n}\n\n.video-point-container {\n  position: relative;\n  display: flex;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n}\n\n.ul-wrap {\n  display: flex;\n  align-items: center;\n  flex-wrap: nowrap;\n  max-width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  flex-shrink: 0;\n  padding: 0 10px;\n  border: 1px solid #49474E;\n  background: rgba(15, 15, 15, .8);\n  border-radius: 8px;\n\n  &.ul-wrap-min {\n    padding-left: 0;\n    padding-right: 0;\n  }\n}\n\nul {\n  box-sizing: border-box;\n  display: flex;\n  flex-wrap: nowrap;\n  height: 100%;\n  padding: 10px 0 9px 0;\n  overflow-x: auto;\n  overflow-y: hidden;\n  scrollbar-width: none; // 不显示滚动条,兼容火狐\n\n  &::-webkit-scrollbar {\n    width: 0;\n    height: 0;\n    opacity: 0;\n  }\n}\n\nli {\n  box-sizing: border-box;\n  position: relative;\n  display: inline-flex;\n  flex-shrink: 0;\n  width: 20%;\n  padding: 0 7px 0 22px;\n  font-size: 12px;\n  line-height: 17px;\n  color: $color;\n  text-align: left;\n  cursor: pointer;\n  overflow: hidden;\n  word-break: break-all;\n  display: -webkit-box;\n  -webkit-line-clamp: 2;\n  /* autoprefixer: ignore next */\n  -webkit-box-orient: vertical;\n\n  &:before {\n    content: '';\n    position: absolute;\n    top: 6.5px;\n    left: 13px;\n    width: 4px;\n    height: 4px;\n    background: #D8D8D8;\n    border-radius: 50%;\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    top: 50%;\n    right: 0;\n    width: 1px;\n    height: 20px;\n    transform: translateY(-50%);\n    background: rgba(194, 194, 194, .5);\n  }\n\n  &:last-child {\n    &:after {\n      display: none;\n    }\n  }\n\n  &.active {\n    color: $activeColor;\n\n    &:before {\n      top: 4px;\n      left: 9px;\n      width: 8px;\n      height: 8px;\n      background: url('../image/i-runing.gif') no-repeat center / 100% auto transparent;\n      border-radius: 0;\n    }\n\n    &.paused {\n      &:before {\n        content: '';\n        position: absolute;\n        top: 4px;\n        left: 9px;\n        width: 8px;\n        height: 8px;\n        background: url('../image/i-pause.png') no-repeat center / 100% auto transparent;\n        border-radius: 0;\n      }\n    }\n\n    .time {\n      color: $activeColor;\n    }\n  }\n}\n\n.time {\n  display: inline-block;\n  color: $color;\n}\n\n.icon {\n  display: inline-block;\n  position: absolute;\n  z-index: 1;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 14px;\n  height: 28px;\n  background-size: 100% auto;\n  background-repeat: no-repeat;\n  background-position: center;\n}\n\n.icon-prev {\n  left: 0;\n  background-image: url('../image/arrow-left.png');\n}\n\n.icon-next {\n  right: 0;\n  background-image: url('../image/arrow-right.png');\n}\n\n// 移动端相关样式\n\n.fold-area {\n  position: relative;\n  box-sizing: border-box;\n  width: 33px;\n  height: 100%;\n  flex-shrink: 0;\n  background: rgba(14, 21, 29, 0.7);\n  border-radius: 5px;\n\n  .icon-next {\n    right: -9px;\n    width: 9px;\n    height: 18px;\n    border-radius: 0 9px 9px 0;\n    background: no-repeat url('../image/icon-next.png') center right 2px / 9px auto rgba(14, 21, 29, 0.7);\n  }\n}\n\n.fold-area-text {\n  transform: scale(0.5) translateY(-10px);\n  line-height: 33px;\n  font-size: 20px;\n  color: $color;\n  writing-mode: vertical-lr;\n  word-break: keep-all;\n}\n\n.unfold-area {\n  position: relative;\n  box-sizing: border-box;\n  width: 33px;\n  height: 100%;\n  flex-shrink: 0;\n  background: rgba(14, 21, 29, 0.7);\n  border-radius: 6px 6px 6px 6px;\n  border-right: 1px solid #49474E;\n  border-right: none;\n}\n\n.unfold-area-text {\n  transform: scale(0.5) translateY(-10px);\n  line-height: 33px;\n  font-size: 20px;\n  color: $color;\n  writing-mode: vertical-lr;\n  word-break: keep-all;\n}\n\n.landscape-fold-area-text {\n  font-size: 18px;\n  transform: scale(.5);\n  font-weight: 400;\n  color: $color;\n  word-break: keep-all;\n}\n\n.landscape-unfold-area-text {\n  width: 60px;\n  height: 28px;\n  font-size: 18px;\n  transform: scale(.5);\n  font-weight: 400;\n  color: $color;\n  word-break: keep-all;\n  text-align: center;\n}\n\n.icon-book {\n  flex-shrink: 0;\n  width: 20px;\n  height: 18px;\n  margin: 10px 0 -4px 0;\n  background: no-repeat url('../image/book.png') center / 100% auto;\n}\n\n.video-point-mobile {\n  height: 50px;\n\n  .ul-wrap {\n    height: 100%;\n    padding-left: 0;\n    padding-right: 0;\n    border-radius: 6px;\n  }\n\n  .list {\n    padding: 9px 0;\n  }\n\n  // 横屏\n  &.landscape{\n    height: 55px;\n\n    .list {\n      padding: 12px 0;\n    }\n\n    .unfold-area {\n      display: flex;\n      align-items: center;\n      flex-direction: column;\n      width: 50px;\n    }\n\n    .fold-area {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      flex-direction: column;\n      width: 50px;\n      border-right: none;\n\n      &.landscape {\n        width: 100%;\n      }\n    }\n  }\n}\n\n.ul-wrap-hide {\n  position: relative;\n  top: 1px;\n  left: 1px;\n  display: block;\n  width: 33px;\n  border: none;\n\n  .icon-book {\n    margin-bottom: -5px;\n  }\n\n  &.ul-wrap-hide-landsace {\n    width: 55px;\n  }\n}\n\n.landscape {\n  .ul-wrap-hide {\n    width: 50px;\n  }\n}\n\n.mobile-list {\n  max-width: calc(100% - 55px);\n}\n\n</style>\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoPoint.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoPoint.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoPoint.vue?vue&type=template&id=5350a1cf&scoped=true&\"\nimport script from \"./VideoPoint.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoPoint.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VideoPoint.vue?vue&type=style&index=0&id=5350a1cf&prod&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5350a1cf\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}